[README.md](https://github.com/user-attachments/files/24986555/README.md)
# 📰 삼천리 보도자료 게재 현황 추적 시스템

보도자료 배포 후 각 매체의 게재 현황을 추적하고 시각화하는 Streamlit 대시보드입니다.

## 🎯 주요 기능

- ✅ 텍스트에서 자동으로 매체명 추출
- ✅ **제목으로 네이버 뉴스 자동 검색 (신규! 무료!)**
- ✅ 텍스트와 네이버 검색 결과 비교로 누락 매체 자동 발견
- ✅ 구글 시트에 날짜별 매트릭스 형태로 저장
- ✅ 매체별 게재율 통계
- ✅ 시각화 차트 제공
- ✅ 완전 자동화 - 제목만 입력하면 네이버에서 모든 매체 검색

## 🚀 설치 및 실행

### 1. 패키지 설치
```bash
pip install -r requirements.txt
```

### 2. 구글 시트 설정
1. Google Cloud Console에서 서비스 계정 생성
2. JSON 키 다운로드
3. `.streamlit/secrets.toml` 파일 생성 (이미 완료됨)
4. 구글 시트에 서비스 계정 이메일 추가:
   ```
   pr-sheet-access@pr-dashboard-485514.iam.gserviceaccount.com
   ```
   - 권한: **편집자**

### 3. 앱 실행
```bash
streamlit run pr_tracker_app.py
```

## 📊 사용 방법

### 보도자료 등록

#### 방법 A: 텍스트 + 네이버 자동 검색 (권장 ⭐)
1. 왼쪽 사이드바에서 **배포 날짜** 입력
2. **보도자료 제목** 입력
3. 모니스 등에서 받은 **매체 목록 텍스트** 붙여넣기
4. "네이버 뉴스 자동 검색" 체크 (기본 활성화)
5. **등록하기** 버튼 클릭
6. ✨ 네이버에서 자동으로 추가 매체를 찾아줍니다!

#### 방법 B: 제목만으로 완전 자동화 🚀
1. 배포 날짜 입력
2. 보도자료 제목 입력
3. "네이버 뉴스 자동 검색" 체크
4. 등록하기 클릭
5. 🔍 네이버에서 자동으로 모든 매체를 찾아줍니다!

#### 방법 C: 텍스트만 사용
1. 배포 날짜, 제목 입력
2. 매체 목록 텍스트 붙여넣기
3. "네이버 뉴스 자동 검색" 체크 해제
4. 등록하기

### 현황 확인
- 메인 화면에서 매체별 게재 현황 확인
- 날짜별 컬럼에 'O' 표시로 게재 여부 확인
- 매체별 게재율 통계 및 차트 확인

## 📁 파일 구조

```
.
├── pr_tracker_app.py          # 메인 Streamlit 앱
├── requirements.txt           # Python 패키지 목록
├── .streamlit/
│   └── secrets.toml          # 구글 시트 연결 정보
└── README.md                 # 이 파일
```

## 🔧 구글 시트 구조

| 구분 | 매체명 | 1/23 | 1/24 | 1/25 | ... |
|------|--------|------|------|------|-----|
| 제목 |        | 보도자료 제목 1 | 보도자료 제목 2 | ... | ... |
|      | 가스신문 | O | | O | ... |
|      | 이투뉴스 | O | O | | ... |
|      | 조선일보 | O | | O | ... |

- **첫 행**: 보도자료 제목
- **이후 행**: 매체별 게재 현황 (O 표시)
- **날짜 컬럼**: 자동 생성

## 🛠️ 텍스트 형식

시스템이 인식하는 텍스트 패턴:
```
기사 제목... (매체명 YYYY/MM/DD)
```

예시:
```
삼천리EV 송지아... (한국경제 2026/01/06)
삼천리EV 송지아... (이투뉴스 2026/01/06)
삼천리EV 송지아... (에너지신문 2026/01/06)
```

## 🔍 네이버 자동 검색 작동 방식

1. 입력한 제목으로 네이버 뉴스 검색 API 호출
2. 검색 결과 HTML에서 매체명 자동 추출
3. 입력 텍스트와 자동으로 비교
4. 누락된 매체 발견 및 통합
5. 차단 방지를 위한 딜레이 적용

## ⚙️ 설정 파일

`.streamlit/secrets.toml` 구조:
```toml
[connections.gsheets]
spreadsheet = "구글 시트 ID"
type = "service_account"
project_id = "프로젝트 ID"
private_key = "비밀키"
client_email = "서비스 계정 이메일"
# ... 기타 인증 정보
```

## 📝 참고사항

- 구글 시트 URL: https://docs.google.com/spreadsheets/d/16PhsJzo4askm-8iT0tMuBjsLpTEegCRDFFl4AUng6Hg/edit
- 워크시트 이름: "2026년"
- 텍스트 형식: `(매체명 YYYY/MM/DD)` 패턴 인식
- 네이버 자동 검색: 제목으로 자동 크롤링
- **완전 무료! API 비용 없음**
- 차단 방지를 위한 자동 딜레이 적용

## 🐛 트러블슈팅

### "권한이 없습니다" 오류
→ 구글 시트에 서비스 계정 이메일이 편집자 권한으로 추가되었는지 확인

### "매체를 찾을 수 없습니다" 오류
→ 텍스트 형식이 올바른지 확인 `(매체명 YYYY/MM/DD)` 패턴
→ 네이버 자동 검색 체크박스가 활성화되어 있는지 확인

### 시트 연결 오류
→ `.streamlit/secrets.toml` 파일이 올바르게 생성되었는지 확인

### 네이버 자동 검색이 작동하지 않음
→ 제목이 정확한지 확인
→ 네이버에 해당 제목으로 검색되는 기사가 있는지 확인
→ 너무 자주 사용하면 일시적으로 차단될 수 있음 (잠시 후 재시도)

## 📧 문의

문제가 발생하면 GitHub 이슈를 등록해주세요.
